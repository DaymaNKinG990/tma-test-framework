# GitHub Actions и GitHub Pages - Быстрая настройка

## Шаги для активации

### 1. Включить GitHub Pages

1. Перейдите в **Settings** вашего репозитория
2. В левом меню выберите **Pages**
3. В разделе **Source** выберите **GitHub Actions**
4. Сохраните изменения

### 2. Проверить права доступа

Убедитесь, что у GitHub Actions есть права на:
- `contents: read` - чтение кода
- `pages: write` - публикация на Pages
- `id-token: write` - для OIDC (уже настроено в workflow)

### 3. Запустить workflow

Workflow автоматически запустится при:
- Push в ветки `main`, `master` или `develop`
- Создании Pull Request в эти ветки
- Ручном запуске через **Actions** → **Run Tests and Publish Allure Reports** → **Run workflow**

### 4. Просмотр отчетов

После успешного выполнения workflow:
- Отчеты будут доступны по адресу: `https://<ваш-username>.github.io/<название-репозитория>/`
- Также можно скачать артефакты в разделе **Actions** → выберите workflow run → **Artifacts**

## Что делает workflow

1. ✅ Устанавливает зависимости (Python, uv, playwright)
2. ✅ Запускает все тесты с генерацией Allure результатов
3. ✅ Генерирует Allure отчет
4. ✅ Публикует отчет на GitHub Pages (только для main/master)
5. ✅ Сохраняет артефакты (Allure результаты и coverage отчеты)

## Устранение проблем

### Отчеты не появляются на Pages

1. Проверьте, что Pages включены с источником "GitHub Actions"
2. Убедитесь, что workflow выполнился успешно
3. Подождите несколько минут для деплоя
4. Проверьте статус деплоя в **Settings** → **Pages**

### Workflow падает

1. Проверьте логи в разделе **Actions**
2. Убедитесь, что все зависимости установлены
3. Проверьте, что Playwright браузеры установлены

### Coverage ниже порога

Если coverage ниже 80%, workflow упадет. Решения:
- Добавьте больше тестов
- Проверьте coverage отчет в артефактах
- Временно снизьте порог в `pyproject.toml` (не рекомендуется)

## Дополнительная информация

Подробная документация: [docs/ci-cd-setup.md](../docs/ci-cd-setup.md)

